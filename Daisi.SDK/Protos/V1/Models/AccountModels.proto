syntax = "proto3";

import "google/protobuf/timestamp.proto";
import "Protos/V1/Models/SystemModels.proto";
import "Protos/V1/Models/DriveModels.proto";
import "Protos/V1/Models/CreditModels.proto";
import "Protos/V1/Models/HostModels.proto";
import "Protos/V1/Models/DappModels.proto";

package daisi.protos.v1;

message GetAccountRequest{
}
message GetAccountResponse{
	Account Account = 1;
	bool HasTaxId = 2;
}
message UpdateAccountRequest{
	Account Account = 1;
}
message UpdateAccountResponse{
	bool Success = 1;
	optional string Message = 2;
}


message CreateUserRequest{
	User User = 1;
	optional string AccountName = 2;
}
message CreateUserResponse {
	bool Success = 1;
	User User = 2;
	optional string Message = 3;
}
message GetUserRequest{
	string UserId = 1;
}
message GetUserResponse{
	User User = 1;
	bool Success = 2;
	optional string Message = 3;
}
message GetUsersRequest{
	PagingInfo Paging = 1;
}
message GetUsersResponse{
	repeated User Users = 1;
	int32 TotalCount = 2;
}
message ArchiveUserRequest {
	string UserId = 1;
}
message ArchiveUserResponse {
	bool Success = 1;
	optional string Message = 2;
}
message UpdateUserRequest {
	User User = 1;
}
message UpdateUserResponse{
	bool Success = 1;
	optional string Message = 2;
}

message Account{
	string Id = 1;
	string Name = 2;
	optional string TaxId = 3;
	optional StorageLimits DriveStorageLimits = 4;
}

message User {
	string Id = 1;
	string Name = 2;
	string EmailAddress = 3;
	optional string Phone = 4;
	optional string Source = 5;
	UserRoles Role = 6;
	optional google.protobuf.Timestamp DateEmailConfirmed = 7;
	optional google.protobuf.Timestamp DatePhoneConfirmed = 8;
	bool AllowedToLogin = 9;
	bool AllowSMS = 10;
	bool AllowEmail = 11;
	repeated EmailList EmailLists = 12;
	UserStatus Status = 13;
}

message EmailList {
	string Id = 1;
	string Name = 2;
}

enum UserRoles {
	UserRolesReader = 0;
	UserRolesManager = 1;
	UserRolesOwner = 2;
	UserRolesAdmin = 3;
}
enum UserStatus {
	UserStatusActive = 0;
	UserStatusArchived = 1;
}

// Admin messages
message AdminGetAccountsRequest {
	PagingInfo Paging = 1;
}
message AdminGetAccountsResponse {
	repeated AdminAccountSummary Accounts = 1;
	int32 TotalCount = 2;
}
message AdminAccountSummary {
	string Id = 1;
	string Name = 2;
}
message AdminGetAccountRequest {
	string AccountId = 1;
}
message AdminGetAccountResponse {
	Account Account = 1;
	int32 UserCount = 2;
	int32 HostCount = 3;
	int32 AppCount = 4;
	CreditAccountInfo CreditInfo = 5;
}
message AdminUpdateAccountRequest {
	string AccountId = 1;
	string Name = 2;
}

// Admin audit messages
message AdminAuditCreditBalanceRequest {
	string AccountId = 1;
}
message AdminAuditCreditBalanceResponse {
	string AccountId = 1;
	int64 StoredBalance = 2;
	int64 CalculatedBalance = 3;
	int64 StoredTotalEarned = 4;
	int64 CalculatedTotalEarned = 5;
	int64 StoredTotalSpent = 6;
	int64 CalculatedTotalSpent = 7;
	int64 StoredTotalPurchased = 8;
	int64 CalculatedTotalPurchased = 9;
	int32 TransactionCount = 10;
	bool BalanceMatches = 11;
	bool WasCorrected = 12;
	optional string Message = 13;
}

message AdminSetStorageLimitsRequest {
	string AccountId = 1;
	StorageLimits Limits = 2;
}

// Admin resource listing messages
message AdminGetAccountUsersRequest {
	string AccountId = 1;
	PagingInfo Paging = 2;
}
message AdminGetAccountUsersResponse {
	repeated User Users = 1;
	int32 TotalCount = 2;
}
message AdminGetAccountHostsRequest {
	string AccountId = 1;
	PagingInfo Paging = 2;
}
message AdminGetAccountHostsResponse {
	repeated Host Hosts = 1;
	int32 TotalCount = 2;
}
message AdminGetAccountAppsRequest {
	string AccountId = 1;
	PagingInfo Paging = 2;
}
message AdminGetAccountAppsResponse {
	repeated Dapp Apps = 1;
	int32 TotalCount = 2;
}
